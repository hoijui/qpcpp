<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>QP/C++: qk_port.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">QP/C++
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_43e0a1f539e00dcfa1a6bc4d4fee4fc2.html">home</a></li><li class="navelem"><a class="el" href="dir_49bfe68ac33056ca9e0e32d2d90e505b.html">hoijui</a></li><li class="navelem"><a class="el" href="dir_7a38e231dbbf831d01cc0b1e6d8efe7c.html">src</a></li><li class="navelem"><a class="el" href="dir_5b3e2103a4d4f447cdd1d1130a4cc0cf.html">qpcpp</a></li><li class="navelem"><a class="el" href="dir_6dc74f3bf5e1808eebd8d600365f7e7d.html">ports</a></li><li class="navelem"><a class="el" href="dir_0c2a9ec07d1bdd3a8ca40965697b6a88.html">lint</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">qk_port.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>QK/C++ port to <a class="el" href="class_q_k.html" title="QK services. ">QK</a> for a "generic" C++ compiler.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="qk_8h_source.html">qk.h</a>&quot;</code><br/>
</div>
<p><a href="qk__port_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8dc2ef090cbfdb8068e02be7af74a7a7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qk__port_8h.html#a8dc2ef090cbfdb8068e02be7af74a7a7">QK_EXT_SAVE</a>(act_)&#160;&#160;&#160;FPU_save((FPU_context *)(act_)-&gt;m_thread)</td></tr>
<tr class="memdesc:a8dc2ef090cbfdb8068e02be7af74a7a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define the method for saving the extended context (e.g., the context of a floating-point co-processor).  <a href="#a8dc2ef090cbfdb8068e02be7af74a7a7">More...</a><br/></td></tr>
<tr class="separator:a8dc2ef090cbfdb8068e02be7af74a7a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7300efd5716c71f33e1a0a17ac4a95ed"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qk__port_8h.html#a7300efd5716c71f33e1a0a17ac4a95ed">QK_EXT_RESTORE</a>(act_)&#160;&#160;&#160;FPU_restore((FPU_context *)(act_)-&gt;m_thread)</td></tr>
<tr class="memdesc:a7300efd5716c71f33e1a0a17ac4a95ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define the method for restoring the extended context (e.g., the context of a floating-point co-processor).  <a href="#a7300efd5716c71f33e1a0a17ac4a95ed">More...</a><br/></td></tr>
<tr class="separator:a7300efd5716c71f33e1a0a17ac4a95ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fff98f5737d46ce7a2228e38486c5ba"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qk__port_8h.html#a0fff98f5737d46ce7a2228e38486c5ba">QK_TLS</a>(act_)&#160;&#160;&#160;_impure_ptr = (struct _reent *)(act_)-&gt;m_thread</td></tr>
<tr class="memdesc:a0fff98f5737d46ce7a2228e38486c5ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define the method for switching the Thread-Local-Storage for for a given thread.  <a href="#a0fff98f5737d46ce7a2228e38486c5ba">More...</a><br/></td></tr>
<tr class="separator:a0fff98f5737d46ce7a2228e38486c5ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3a6c9c79a8f39f1299196922e3eb6b5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qk__port_8h.html#ad3a6c9c79a8f39f1299196922e3eb6b5">QK_ISR_ENTRY</a>()</td></tr>
<tr class="memdesc:ad3a6c9c79a8f39f1299196922e3eb6b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define the ISR entry sequence, if the compiler supports writing interrupts in C++.  <a href="#ad3a6c9c79a8f39f1299196922e3eb6b5">More...</a><br/></td></tr>
<tr class="separator:ad3a6c9c79a8f39f1299196922e3eb6b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18f2cc4dd2d00e3d5efb593d0754a95b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qk__port_8h.html#a18f2cc4dd2d00e3d5efb593d0754a95b">QK_ISR_EXIT</a>()</td></tr>
<tr class="memdesc:a18f2cc4dd2d00e3d5efb593d0754a95b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define the ISR exit sequence, if the compiler supports writing interrupts in C++.  <a href="#a18f2cc4dd2d00e3d5efb593d0754a95b">More...</a><br/></td></tr>
<tr class="separator:a18f2cc4dd2d00e3d5efb593d0754a95b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>QK/C++ port to <a class="el" href="class_q_k.html" title="QK services. ">QK</a> for a "generic" C++ compiler. </p>
<dl class="section note"><dt>Note</dt><dd>This is just an EXAMPLE of a <a class="el" href="class_q_k.html" title="QK services. ">QK</a> port used for "linting" the <a class="el" href="class_q_k.html" title="QK services. ">QK</a>. Ports of <a class="el" href="class_q_k.html" title="QK services. ">QK</a> are located in the directory &lt;qpcpp_3&gt;/ports. </dd></dl>

<p>Definition in file <a class="el" href="qk__port_8h_source.html">qk_port.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a7300efd5716c71f33e1a0a17ac4a95ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QK_EXT_RESTORE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">act_</td><td>)</td>
          <td>&#160;&#160;&#160;FPU_restore((FPU_context *)(act_)-&gt;m_thread)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define the method for restoring the extended context (e.g., the context of a floating-point co-processor). </p>
<dl class="section note"><dt>Note</dt><dd>This is just an example of <a class="el" href="qk__port_8h.html#a7300efd5716c71f33e1a0a17ac4a95ed" title="Define the method for restoring the extended context (e.g., the context of a floating-point co-proces...">QK_EXT_RESTORE</a> macro. You need to define the macro appropriately for the co-processor you're using. This macro is only used in the extended <a class="el" href="class_q_k.html" title="QK services. ">QK</a> scheduler QK_scheduleExt_(). If you define <a class="el" href="qk__port_8h.html#a7300efd5716c71f33e1a0a17ac4a95ed" title="Define the method for restoring the extended context (e.g., the context of a floating-point co-proces...">QK_EXT_RESTORE</a>, you also need to provide <a class="el" href="qk__port_8h.html#a8dc2ef090cbfdb8068e02be7af74a7a7" title="Define the method for saving the extended context (e.g., the context of a floating-point co-processor...">QK_EXT_SAVE</a> and #QK_EXT_TYPE. </dd></dl>

<p>Definition at line <a class="el" href="qk__port_8h_source.html#l00061">61</a> of file <a class="el" href="qk__port_8h_source.html">qk_port.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8dc2ef090cbfdb8068e02be7af74a7a7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QK_EXT_SAVE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">act_</td><td>)</td>
          <td>&#160;&#160;&#160;FPU_save((FPU_context *)(act_)-&gt;m_thread)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define the method for saving the extended context (e.g., the context of a floating-point co-processor). </p>
<dl class="section note"><dt>Note</dt><dd>This is just an example of <a class="el" href="qk__port_8h.html#a8dc2ef090cbfdb8068e02be7af74a7a7" title="Define the method for saving the extended context (e.g., the context of a floating-point co-processor...">QK_EXT_SAVE</a> macro. You need to define the macro appropriately for the co-processor you're using. This macro is only used in the extended <a class="el" href="class_q_k.html" title="QK services. ">QK</a> scheduler QK_scheduleExt_(). If you define <a class="el" href="qk__port_8h.html#a8dc2ef090cbfdb8068e02be7af74a7a7" title="Define the method for saving the extended context (e.g., the context of a floating-point co-processor...">QK_EXT_SAVE</a>, you also need to provide <a class="el" href="qk__port_8h.html#a7300efd5716c71f33e1a0a17ac4a95ed" title="Define the method for restoring the extended context (e.g., the context of a floating-point co-proces...">QK_EXT_RESTORE</a> and #QK_EXT_TYPE. </dd></dl>

<p>Definition at line <a class="el" href="qk__port_8h_source.html#l00052">52</a> of file <a class="el" href="qk__port_8h_source.html">qk_port.h</a>.</p>

<p>Referenced by <a class="el" href="qk__ext_8cpp_source.html#l00051">QK_schedExt_()</a>.</p>

</div>
</div>
<a class="anchor" id="ad3a6c9c79a8f39f1299196922e3eb6b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QK_ISR_ENTRY</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div>
<div class="line">    ++<a class="code" href="qk_8h.html#a2c90cb8ede2a3fa89616f23b7df258de">QK_intNest_</a>; <a class="code" href="qs_8h.html#a3a8b51b47686825984c8a7c1eff990ac">\</a></div>
<div class="line"><a class="code" href="qs_8h.html#a3a8b51b47686825984c8a7c1eff990ac">    QF_QS_ISR_ENTRY</a>(<a class="code" href="qk_8h.html#a2c90cb8ede2a3fa89616f23b7df258de">QK_intNest_</a>, <a class="code" href="qk_8h.html#a81b2832f194ed3d09803c8a4e86a1a23">QK_currPrio_</a>); \</div>
<div class="line">} <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="qk_8h_html_a81b2832f194ed3d09803c8a4e86a1a23"><div class="ttname"><a href="qk_8h.html#a81b2832f194ed3d09803c8a4e86a1a23">QK_currPrio_</a></div><div class="ttdeci">uint8_t volatile QK_currPrio_</div><div class="ttdoc">current task/interrupt priority </div><div class="ttdef"><b>Definition:</b> <a href="qk_8h_source.html#l00092">qk.h:92</a></div></div>
<div class="ttc" id="qk_8h_html_a2c90cb8ede2a3fa89616f23b7df258de"><div class="ttname"><a href="qk_8h.html#a2c90cb8ede2a3fa89616f23b7df258de">QK_intNest_</a></div><div class="ttdeci">uint8_t volatile QK_intNest_</div><div class="ttdoc">interrupt nesting level </div><div class="ttdef"><b>Definition:</b> <a href="qk_8h_source.html#l00093">qk.h:93</a></div></div>
<div class="ttc" id="qs_8h_html_a3a8b51b47686825984c8a7c1eff990ac"><div class="ttname"><a href="qs_8h.html#a3a8b51b47686825984c8a7c1eff990ac">QF_QS_ISR_ENTRY</a></div><div class="ttdeci">#define QF_QS_ISR_ENTRY(isrnest_, prio_)</div><div class="ttdoc">Output the interrupt entry record. </div><div class="ttdef"><b>Definition:</b> <a href="qs_8h_source.html#l01021">qs.h:1021</a></div></div>
</div><!-- fragment -->
<p>Define the ISR entry sequence, if the compiler supports writing interrupts in C++. </p>
<dl class="section note"><dt>Note</dt><dd>This is just an example of <a class="el" href="qk__port_8h.html#ad3a6c9c79a8f39f1299196922e3eb6b5" title="Define the ISR entry sequence, if the compiler supports writing interrupts in C++. ">QK_ISR_ENTRY</a>. You need to define the macro appropriately for the CPU/compiler you're using. Also, some <a class="el" href="class_q_k.html" title="QK services. ">QK</a> ports will not define this macro, but instead will provide ISR skeleton code in assembly. </dd></dl>

<p>Definition at line <a class="el" href="qk__port_8h_source.html#l00100">100</a> of file <a class="el" href="qk__port_8h_source.html">qk_port.h</a>.</p>

</div>
</div>
<a class="anchor" id="a18f2cc4dd2d00e3d5efb593d0754a95b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QK_ISR_EXIT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div>
<div class="line">    send End-Of-Interrupt instruction to the Interrupt Controller; <a class="code" href="qs_8h.html#ad212a914d996105955eac8d053183900">\</a></div>
<div class="line"><a class="code" href="qs_8h.html#ad212a914d996105955eac8d053183900">    QF_QS_ISR_EXIT</a>(<a class="code" href="qk_8h.html#a2c90cb8ede2a3fa89616f23b7df258de">QK_intNest_</a>, <a class="code" href="qk_8h.html#a81b2832f194ed3d09803c8a4e86a1a23">QK_currPrio_</a>); \</div>
<div class="line">    --<a class="code" href="qk_8h.html#a2c90cb8ede2a3fa89616f23b7df258de">QK_intNest_</a>; \</div>
<div class="line">    if (<a class="code" href="qk_8h.html#a2c90cb8ede2a3fa89616f23b7df258de">QK_intNest_</a> == (<a class="code" href="qep__port_8h.html#a1add8b7f40b8c78daa5d7a2eb886c924">uint8_t</a>)0) { \</div>
<div class="line">        QK_scheduleExt_(); \</div>
<div class="line">    } \</div>
<div class="line">} <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="qs_8h_html_ad212a914d996105955eac8d053183900"><div class="ttname"><a href="qs_8h.html#ad212a914d996105955eac8d053183900">QF_QS_ISR_EXIT</a></div><div class="ttdeci">#define QF_QS_ISR_EXIT(isrnest_, prio_)</div><div class="ttdoc">Output the interrupt exit record. </div><div class="ttdef"><b>Definition:</b> <a href="qs_8h_source.html#l01029">qs.h:1029</a></div></div>
<div class="ttc" id="qk_8h_html_a81b2832f194ed3d09803c8a4e86a1a23"><div class="ttname"><a href="qk_8h.html#a81b2832f194ed3d09803c8a4e86a1a23">QK_currPrio_</a></div><div class="ttdeci">uint8_t volatile QK_currPrio_</div><div class="ttdoc">current task/interrupt priority </div><div class="ttdef"><b>Definition:</b> <a href="qk_8h_source.html#l00092">qk.h:92</a></div></div>
<div class="ttc" id="qep__port_8h_html_a1add8b7f40b8c78daa5d7a2eb886c924"><div class="ttname"><a href="qep__port_8h.html#a1add8b7f40b8c78daa5d7a2eb886c924">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdoc">C99 exact-width 8-bit unsigned int. </div><div class="ttdef"><b>Definition:</b> <a href="qep__port_8h_source.html#l00100">qep_port.h:100</a></div></div>
<div class="ttc" id="qk_8h_html_a2c90cb8ede2a3fa89616f23b7df258de"><div class="ttname"><a href="qk_8h.html#a2c90cb8ede2a3fa89616f23b7df258de">QK_intNest_</a></div><div class="ttdeci">uint8_t volatile QK_intNest_</div><div class="ttdoc">interrupt nesting level </div><div class="ttdef"><b>Definition:</b> <a href="qk_8h_source.html#l00093">qk.h:93</a></div></div>
</div><!-- fragment -->
<p>Define the ISR exit sequence, if the compiler supports writing interrupts in C++. </p>
<dl class="section note"><dt>Note</dt><dd>This is just an example of <a class="el" href="qk__port_8h.html#a18f2cc4dd2d00e3d5efb593d0754a95b" title="Define the ISR exit sequence, if the compiler supports writing interrupts in C++. ...">QK_ISR_EXIT</a>. You need to define the macro appropriately for the CPU/compiler you're using. Also, some <a class="el" href="class_q_k.html" title="QK services. ">QK</a> ports will not define this macro, but instead will provide ISR skeleton code in assembly. </dd></dl>

<p>Definition at line <a class="el" href="qk__port_8h_source.html#l00113">113</a> of file <a class="el" href="qk__port_8h_source.html">qk_port.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0fff98f5737d46ce7a2228e38486c5ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QK_TLS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">act_</td><td>)</td>
          <td>&#160;&#160;&#160;_impure_ptr = (struct _reent *)(act_)-&gt;m_thread</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define the method for switching the Thread-Local-Storage for for a given thread. </p>
<dl class="section note"><dt>Note</dt><dd>This is just an example of <a class="el" href="qk__port_8h.html#a0fff98f5737d46ce7a2228e38486c5ba" title="Define the method for switching the Thread-Local-Storage for for a given thread. ">QK_TLS</a> macro. You need to define the macro appropriately for the runtime library you're using. This macro is optional and you don't need to define it. The macro is used in both the regular <a class="el" href="class_q_k.html" title="QK services. ">QK</a> scheduler QK_schedule_() and the extended <a class="el" href="class_q_k.html" title="QK services. ">QK</a> scheduler QK_scheduleExt_(). </dd></dl>

<p>Definition at line <a class="el" href="qk__port_8h_source.html#l00081">81</a> of file <a class="el" href="qk__port_8h_source.html">qk_port.h</a>.</p>

<p>Referenced by <a class="el" href="lint__qk__4_81_807_8txt_source.html#l00021">QK::getVersion()</a>, <a class="el" href="qk__sched_8cpp_source.html#l00051">QK_sched_()</a>, and <a class="el" href="qk__ext_8cpp_source.html#l00051">QK_schedExt_()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Nov 28 2016 21:26:17 for QP/C++ by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
